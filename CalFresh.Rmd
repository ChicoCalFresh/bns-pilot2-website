---
title: "CalFresh Student Eligibility"
output: 
  html_document: 
    toc: yes
    toc_float: yes
    css: styles.css
editor_options: 
  chunk_output_type: console
---

```{r, include=FALSE}
source("common_code.R")
```

The following questions were asked in regards to criteria laid out by the CalFresh Requirements. This includes U.S. citizenship (or lawful permanent resident), receiving Cal Grant A/B, and receiving food from a campus meal plan. Household size and monthly income is also looked at and broken down into a chart to show CalFresh eligibility. Students were also determined to be eligible or not for CalFresh based on their responses to these criteria questions.

## CalFresh Criteria
**Below are a series of Yes/No questions asked in order to help determine if a person is eligible for CalFresh benefits.**
```{r}
qs <- c('q38', 'q39', 'q40', 'q41', 'q44')
rnames <- c("Are you a U.S. citizen?", "If not a U.S. citizen, are you a lawful permanent resident (i.e. have a 'green card')?",
            "I was approved for “work study” even though I may not actually have a work study job placement.",
            "I received Cal Grant A or B.",
            "Are you on a campus meal plan?")
binary_table(qs, 'Yes', rnames)
```
Of the participants in the survey `r unname(table(bns$q38)['Yes'])` claim to be U.S. citizens and `r unname(table(bns$q38)['No'])` claim to not be U.S. Citizens. For people who were not, `r unname(table(bns$q39)['Yes'])` people claim to be a lawful permanent residents and `r unname(table(bns$q39)['No'])` people claim to not be a lawful permanent residents. There are `r unname(table(bns$q40)['No'])` people who claim not to be approved for work study and `r unname(table(bns$q40)['Yes'])` claim to be approved for work study. There are `r unname(table(bns$q41)['No'])` students who do not receive Cal Grant A or B (composing 12.4% of the data), and `r unname(table(bns$q41)['Yes'])` students who do receive Cal Grant A or B. The majority of people in the data (`r unname(table(bns$q44)['No'])` people) do not receive any meals from a Campus Meal Plan and the `r unname(table(bns$q44)['No'])` people that are on a Campus Meal Plan claim the following assistance below:

### Meals Per Week
**How many meals per week do you get on your meal plan?**
```{r, fig.height=2}
plot_frq(bns$meals_per_week_mp, ylim=c(0,3.8), coord.flip = TRUE, hjust="left", y.offset = 0.05) + xlab('Meals Per Week')
```
`r unname(table(bns$meals_per_week_mp)['11+'])` people get more than 11 meals per week from Campus Meal Plans, while `r unname(table(bns$meals_per_week_mp)['<11'])` people get less than 11 meals per week from a Campus Meal Plan.

## Household Size & Income
The following two questions were asked about household size and monthly income, which were then combined into a single plot:

- **How many people in your household do you purchase and prepare food with, including yourself? This may or may not include your roommate(s).**
- **How much is your household's gross monthly income (before taxes and not including financial aid)?**

```{r}
library(huxtable)

tmp <- as.data.frame.matrix(table(bns$monthly_hh_income, bns$household_size))
huxtable(tmp, add_rownames = "") %>% set_background_color(2:11, 2:9, "tomato") %>%
  set_background_color(2:3, 2, "darkolivegreen3") %>% set_background_color(2:4, 3, "darkolivegreen3") %>% 
  set_background_color(2:5, 4, "darkolivegreen3") %>% set_background_color(2:6, 5, "darkolivegreen3") %>% 
  set_background_color(2:7, 6, "darkolivegreen3") %>% set_background_color(2:8, 7, "darkolivegreen3") %>% 
  set_background_color(2:9, 8, "darkolivegreen3") %>% set_background_color(2:10, 9, "darkolivegreen3") %>% 
  set_bold(2:3, 2) %>% set_bold(2:4, 3) %>% set_bold(2:5, 4) %>% set_bold(2:6, 5) %>% set_bold(2:7, 6) %>% 
  set_bold(2:8, 7) %>%  set_bold(2:9, 8) %>% set_bold(2:10, 9) %>% 
  set_italic(4:10, 2) %>% set_italic(5:10, 3) %>% set_italic(6:10, 4) %>% set_italic(7:10, 5) %>% 
  set_italic(8:10, 6) %>% set_italic(9:10, 7) %>%  set_italic(10, 8) %>% set_italic(11, 9) %>%
  set_all_borders(brdr(3, "solid", "white")) %>% map_align(by_cols("center")) %>%
  set_width(0.75) %>% set_font_size(12)

rm(tmp)
```
*In the above graph, cells highlighted in green & bold indicate a person is eligible for CalFresh based on their income and cells highlighted in red & italics indicate a person is not eligible. This information is pulled from the CalFresh requirements section A2 (see below for link).*

The majority of people claim to purchase/prepare food (household size) for `r names(sort(table(bns$household_size), decreasing = TRUE))[1]` people (`r unname(sort(table(bns$household_size), decreasing = TRUE))[1]` people claimed this). This is followed by `r unname(sort(table(bns$household_size), decreasing = TRUE))[2]` people claiming to have a household size of `r names(sort(table(bns$household_size), decreasing = TRUE))[2]` person, and `r unname(sort(table(bns$household_size), decreasing = TRUE))[3]` people claiming to have a household size of `r names(sort(table(bns$household_size), decreasing = TRUE))[3]` people. The majority of people's household income (despite household size) seems to be in the range `r names(sort(table(bns$monthly_hh_income), decreasing = TRUE))[1]` (`r unname(sort(table(bns$monthly_hh_income), decreasing = TRUE))[1]` people). As the income bracket increases, the number of people within those bracket decreases drastically. Only `r sum(unname(sort(table(bns$monthly_hh_income), decreasing = TRUE))[6:10])` people claim to have a monthly income greater than \$4,292.

## CalFresh Eligible
**This variable was created under the following assumptions:**

- The person is between the ages 18 to 49.  
- The person is at least a part-time student (6 units per semester for the three campuses in this survey).  
- The person is either a U.S. citizen or lawful permanent resident.  
- Does not get more than half of their meals from meals plans (< 11 per week or none).  
- Identifies as an EOP student.  
- Falls under the household size/income from section A2 on the [CalFresh Basic Eligibility](http://www.publiccounsel.org/pages/?id=0090).

```{r}
plot_frq(bns$calfresh_eligible) + xlab('CalFresh Eligible')
```
We can see that the majority of participants are eligible for CalFresh (`r unname(table(bns$calfresh_eligible)['Yes'])` people), while `r unname(table(bns$calfresh_eligible)['No'])` people are not eligible for these benefits.

